# Render Blueprint â€” AI Parliament
# Docs: https://render.com/docs/blueprint-spec

services:
  # 1. Archestra MCP Platform (Primary Agent Intelligence)
  - type: web
    name: archestra-parliament
    runtime: image
    image:
      url: docker.io/archestra/platform:latest
    envVars:
      - key: ARCHESTRA_QUICKSTART
        value: "true"
    plan: standard
    healthCheckPath: /health
    # Archestra API runs on port 9000
    # After deploy: access admin UI on /admin to configure agents & LLM keys

  # 2. Parliament Backend (MCP Server + Debate Engine)
  - type: web
    name: parliament-backend
    runtime: docker
    dockerfilePath: ./apps/parliament-mcp/Dockerfile
    dockerContext: .
    envVars:
      - key: PORT
        value: "3001"
      - key: NODE_ENV
        value: production
      - key: GEMINI_API_KEY
        sync: false  # Set manually in dashboard
      - key: ARCHESTRA_MCP_URL
        sync: false  # Set to https://archestra-parliament.onrender.com/v1/mcp/sse after deploy
      - key: ARCHESTRA_AUTH_SECRET
        sync: false  # Set after creating MCP gateway in Archestra admin
      - key: BASE_SEPOLIA_RPC
        value: "https://sepolia.base.org"
      - key: PRIVATE_KEY
        sync: false
      - key: PARLIAMENT_REGISTRY_ADDRESS
        sync: false
      - key: DEBATE_SESSION_ADDRESS
        sync: false
      - key: PARLIAMENT_TOKEN_ADDRESS
        sync: false
      - key: DAO_GOVERNANCE_ADDRESS
        sync: false
      - key: PARLIAMENT_BADGES_ADDRESS
        sync: false
    plan: starter
